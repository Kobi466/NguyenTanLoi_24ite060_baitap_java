package Week4_IOStream_Threading.EX10;import java.io.*;import java.net.HttpURLConnection;import java.net.MalformedURLException;import java.net.URL;import java.util.concurrent.BlockingQueue;import java.util.concurrent.LinkedBlockingQueue;public class Run {    static BlockingQueue<String> queue = new LinkedBlockingQueue<>();    static class Download implements Runnable {        String url;        public Download(String url) {            this.url = url;        }        @Override        public void run() {            try {                URL link = new URL(url);                HttpURLConnection connection = (HttpURLConnection) link.openConnection();                connection.setRequestMethod("GET");                try (BufferedReader doc = new BufferedReader(new InputStreamReader(connection.getInputStream()))) {                    String line;                    while ((line = doc.readLine()) != null) {                        queue.put(line);                    }                    queue.put("END");                }            } catch (MalformedURLException e) {                throw new RuntimeException(e);            } catch (IOException | InterruptedException e) {                throw new RuntimeException(e);            }        }    }    static class Writer implements Runnable {        String source;        public Writer(String source) {            this.source = source;        }        @Override        public void run() {            try(BufferedWriter ghi = new BufferedWriter(new FileWriter(source))) {                while(true) {                    String line = queue.take();                    if(line.equals("END")) break;                    ghi.write(line+'\n');                }            } catch (Exception e) {                e.printStackTrace();            }        }    }    public static void main(String[] args) {        Thread thread = new Thread(new Download("https://www.google.com/"));        Thread thread2 = new Thread(new Writer("C:\\Users\\ADMIN\\Documents\\TepText\\Week4_IOStream\\Bai10.txt"));        thread.start();        thread2.start();    }}